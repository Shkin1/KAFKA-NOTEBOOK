kafka 老版偏移量保存在zk上....


kafka 不同发行版的优缺点

0.7  最基础消息队列功能, 无副本机制

0.8  引进副本机制 ==> 完备的分布式高可靠消息队列,  使用的还是老API, 需要指定Zookeeper的地址而非Broker地址

   老版本客户端有很多的问题，特别是生产者 API，它默认使用同步方式发送消息，可以想见其吞吐量一定不会太高。虽然它也支持异步的方式，
   但实际场景中可能会造成消息的丢失，因此 0.8.2.0 版本社区引入了新版本 Producer API，即需要指定 Broker 地址的 Producer。

   据我所知，国内依然有少部分用户在使用 0.8.1.1、0.8.2 版本。我的建议是尽量使用比较新的版本。
   如果你不能升级大版本，我也建议你至少要升级到 0.8.2.2 这个版本，因为该版本
   中老版本消费者 API 是比较稳定的。另外即使你升到了 0.8.2.2，也不要使用新版本
   Producer API，此时它的 Bug 还非常多。

0.9.0.0   2015年11月发布, 重量级的版本迭代,
                大版本增加了基础的安全认证 / 权限功能，同时使用 Java 重写了新版本消费者 API，另外还引入了 Kafka Connect 组件用于实现高性能的数据抽取。
           如果这么多眼花缭乱的功能你一时无暇顾及，那么我希望你记住这个版本的另一个好处，那就是新版本
          Producer API 在这个版本中算比较稳定了。如果你使用 0.9 作为线上环境不妨切换到新版
     本 Producer，这是此版本一个不太为人所知的优势。但和 0.8.2 引入新 API 问题类似，不
         要使用新版本 Consumer API，因为 Bug 超多的，绝对用到你崩溃。即使你反馈问题到社
          区，社区也不会管的，它会无脑地推荐你升级到新版本再试试，因此千万别用 0.9 的新版
          本 Consumer API。对于国内一些使用比较老的 CDH 的创业公司，鉴于其内嵌的就是 0.9
      版本，所以要格外注意这些问题。

    补充: 0.9的版本引入新的consumer,新版本的位移不再保存再Zookeeper中了, 保存在_consumer_offsets中



0.10.0.0   里程碑式的大版本，因为该版本引入了 Kafka Streams

从这个版本起Kafka 正式升级成分布式流处理平台，虽然此时的 Kafka Streams 还基本不能线上部署使
用。0.10 大版本包含两个小版本：0.10.1 和 0.10.2，它们的主要功能变更都是在 Kafka
Streams 组件上。如果你把 Kafka 用作消息引擎，实际上该版本并没有太多的功能提升。
不过在我的印象中自 0.10.2.2 版本起，新版本 Consumer API 算是比较稳定了。如果你依
然在使用 0.10 大版本，我强烈建议你至少升级到 0.10.2.2 然后使用新版本 Consumer
API。还有个事情不得不提，0.10.2.2 修复了一个可能导致 Producer 性能降低的 Bug。
基于性能的缘故你也应该升级到 0.10.2.2。


0.11.0.0





合并说下 1.0 和 2.0 版本吧，因为在我看来这两个大版本主要还是 Kafka Streams的各种改进，在消息引擎方面并未引入太多的重大功能特性。Kafka Streams 的确在这两
个版本有着非常大的变化，也必须承认 Kafka Streams 目前依然还在积极地发展着。如果
你是 Kafka Streams 的用户，至少选择 2.0.0 版本吧。
